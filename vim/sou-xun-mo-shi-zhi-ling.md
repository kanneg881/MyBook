# 搜尋模式指令

## 正規表達式

### 預設 magic 搜尋模式需要增加跳脫字元 \

開啟 very magic 搜尋模式，不用補跳脫字元 `\(` 打 `(` 即可  
\(打在搜尋開頭後面\)  
`\v`

very nomagic 搜尋模式，消除特殊字元含義例如 `.?*`  
\(打在搜尋開頭後面\)  
`\V`

`( ) { | + < >` 這些符號前面需要加跳脫字元 \

`()` 匹配括號裡面的內容

`%()` 括號不會被捕獲子匹配，`\number` 將無效

`[]` 匹配括號裡的字元

`{}` 匹配次數

`<>` 匹配箭頭裡面的內容，左右只能是空白字元

`|` 或者

`+` 匹配前面的匹配原1或多次

`?` 匹配前面的匹配原0或1次

`\w` 等同於 `[0-9A-Za-z_]`  
`\W` 等同於 `[^0-9A-Za-z_]`  
`\x` 等同於 `[0-9a-fA-F]`  
`\_s` 匹配一個空白或一行  
`\_s\+` 匹配任意數量的空白或一行  
`\0` 等同於整個匹配內容  
`\number` 等同於第 number 個圓括號匹配的內容，可以填1 ~ 9  
`\zs` 匹配的起始，其外會被排除高亮，但仍會被查找  
`\ze` 匹配的結束，其外會被排除高亮，但仍會被查找

區分大小（放在結尾處）  
`\C`

不區分大小寫（放在結尾處）  
`\c`

## 轉義

加 \ 就是轉義  
正向查找時，/ 開頭的查找，要查找 / 時需要轉義變成 \/  
反向查找時，? 開頭的查找，要查找 ? 時需要轉義變成 \?  
要查找轉義 \ 也需要轉義，變成 \\

## 編輯

搜尋到第一個匹配時，自動補全剩餘的單字  
但如果搜尋裡面有用 `\v` 前綴，就會補全整個單字  
`<Ctrl-r><Ctrl-w>`

## 搜尋偏移

在搜尋的結尾補上命令，例如 `/search/e`

匹配游標從結尾算起  
`[+num]` 結尾開始右移，`[-num]` 結尾開始左移  
`/e[+num]`  
`/e[-num]`

## 暫存器

`<Ctrl-r>{register}` 貼上暫存器的內容

## 替代

搜尋一段文字，再用另一段文字將其替換  
`:[range]s[ubstitute]/{pattern}/{string}/[flags]`

`{pattern}` 和 `{string}` 都適用正規表達式

### flags

對行內所有的匹配進行替代  
`g`

報告匹配的次數，並不實際進行替代  
`n`

## vimgrep

把找到的匹配放到 quickfix 列表  
`:vimgrep /{pattern}/[g][j] {files}`

 正向遍歷 quickfix 列表  
`:cnext`

反向遍歷 quickfix 列表  
`:cprev`



